{"version":3,"file":"angular-relative-date.min.js","sources":["angular-relative-date.min.js"],"sourcesContent":["(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.relativeDate = f()}})(function(){var define,module,exports;return (function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(_dereq_,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = relativeDateFilter;\nvar getTranslate = function getTranslate(injector, translations) {\n  if (injector.has('$translate')) {\n    return injector.get('$translate');\n  } else {\n    return {\n      instant: function instant(id, params) {\n        return translations[id].replace('{{time}}', params.time);\n      }\n    };\n  }\n};\n\nvar calculateDelta = function calculateDelta(now, date) {\n  return Math.round(Math.abs(now - date) / 1000);\n};\n\nfunction relativeDateFilter($injector, _now, relativeDateTranslations) {\n  var $translate = getTranslate($injector, relativeDateTranslations);\n\n  return function (date) {\n    var now = _now || new Date();\n\n    if (!(date instanceof Date)) {\n      date = new Date(date);\n    }\n\n    var delta = null;\n\n    var minute = 60;\n    var hour = minute * 60;\n    var day = hour * 24;\n    var week = day * 7;\n    var month = day * 30;\n    var year = day * 365;\n\n    delta = calculateDelta(now, date);\n\n    var translate = function translate(translatePhrase, timeValue) {\n      var translateKey;\n\n      if (translatePhrase === 'just_now') {\n        translateKey = translatePhrase;\n      } else if (now >= date) {\n        translateKey = translatePhrase + '_ago';\n      } else {\n        translateKey = translatePhrase + '_from_now';\n      }\n\n      return $translate.instant(translateKey, {\n        time: timeValue\n      });\n    };\n\n    switch (false) {\n      case !(delta < 30):\n        return translate('just_now');\n\n      case !(delta < minute):\n        return translate('seconds', delta);\n\n      case !(delta < 2 * minute):\n        return translate('a_minute');\n\n      case !(delta < hour):\n        return translate('minutes', Math.floor(delta / minute));\n\n      case Math.floor(delta / hour) !== 1:\n        return translate('an_hour');\n\n      case !(delta < day):\n        return translate('hours', Math.floor(delta / hour));\n\n      case !(delta < day * 2):\n        return translate('a_day');\n\n      case !(delta < week):\n        return translate('days', Math.floor(delta / day));\n\n      case Math.floor(delta / week) !== 1:\n        return translate('a_week');\n\n      case !(delta < month):\n        return translate('weeks', Math.floor(delta / week));\n\n      case Math.floor(delta / month) !== 1:\n        return translate('a_month');\n\n      case !(delta < year):\n        return translate('months', Math.floor(delta / month));\n\n      case Math.floor(delta / year) !== 1:\n        return translate('a_year');\n\n      default:\n        return translate('over_a_year');\n    }\n  };\n}\n\n},{}],2:[function(_dereq_,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _translations = _dereq_('./translations');\n\nvar _translations2 = _interopRequireDefault(_translations);\n\nvar _filter = _dereq_('./filter');\n\nvar _filter2 = _interopRequireDefault(_filter);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/* global angular */\n\nvar relativeDate = angular.module('relativeDate', []);\n\nrelativeDate.value('now', null);\nrelativeDate.value('relativeDateTranslations', _translations2.default);\n\nrelativeDate.filter('relativeDate', ['$injector', 'now', 'relativeDateTranslations', _filter2.default]);\n\nexports.default = relativeDate;\n\n},{\"./filter\":1,\"./translations\":3}],3:[function(_dereq_,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = {\n  just_now: 'just now',\n  seconds_ago: '{{time}} seconds ago',\n  a_minute_ago: 'a minute ago',\n  minutes_ago: '{{time}} minutes ago',\n  an_hour_ago: 'an hour ago',\n  hours_ago: '{{time}} hours ago',\n  a_day_ago: 'yesterday',\n  days_ago: '{{time}} days ago',\n  a_week_ago: 'a week ago',\n  weeks_ago: '{{time}} weeks ago',\n  a_month_ago: 'a month ago',\n  months_ago: '{{time}} months ago',\n  a_year_ago: 'a year ago',\n  years_ago: '{{time}} years ago',\n  over_a_year_ago: 'over a year ago',\n  seconds_from_now: '{{time}} seconds from now',\n  a_minute_from_now: 'a minute from now',\n  minutes_from_now: '{{time}} minutes from now',\n  an_hour_from_now: 'an hour from now',\n  hours_from_now: '{{time}} hours from now',\n  a_day_from_now: 'tomorrow',\n  days_from_now: '{{time}} days from now',\n  a_week_from_now: 'a week from now',\n  weeks_from_now: '{{time}} weeks from now',\n  a_month_from_now: 'a month from now',\n  months_from_now: '{{time}} months from now',\n  a_year_from_now: 'a year from now',\n  years_from_now: '{{time}} years from now',\n  over_a_year_from_now: 'over a year from now'\n};\n\n},{}]},{},[2])(2)\n});\n\n\n"],"names":["f","exports","module","define","amd","window","global","self","this","relativeDate","r","e","n","t","o","i","c","require","u","a","Error","code","p","call","length","1","_dereq_","Object","defineProperty","value","default","$injector","_now","relativeDateTranslations","$translate","getTranslate","date","translate","translatePhrase","timeValue","translateKey","now","instant","time","delta","Date","hour","minute","day","week","month","year","calculateDelta","Math","floor","injector","translations","has","get","id","params","replace","round","abs","2","_translations2","_interopRequireDefault","_filter2","obj","__esModule","angular","filter","./filter","./translations","3","just_now","seconds_ago","a_minute_ago","minutes_ago","an_hour_ago","hours_ago","a_day_ago","days_ago","a_week_ago","weeks_ago","a_month_ago","months_ago","a_year_ago","years_ago","over_a_year_ago","seconds_from_now","a_minute_from_now","minutes_from_now","an_hour_from_now","hours_from_now","a_day_from_now","days_from_now","a_week_from_now","weeks_from_now","a_month_from_now","months_from_now","a_year_from_now","years_from_now","over_a_year_from_now"],"mappings":"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"}